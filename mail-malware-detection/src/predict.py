"""
Simple prediction CLI: loads pipeline and predicts phishing probability for a subject+body.
"""
import argparse
import joblib

if __name__ == '__main__':
    parser = argparse.ArgumentParser()
    parser.add_argument('--model', default='models/phishing_pipeline.joblib')
    parser.add_argument('--subject', default='')
    parser.add_argument('--body', default='')
    args = parser.parse_args()

    pipeline = joblib.load(args.model)
    text = (args.subject or '') + ' ' + (args.body or '')
    prob = pipeline.predict_proba([text])[0,1]
    pred = pipeline.predict([text])[0]
    print({'is_phishing': bool(pred), 'probability': float(prob)})
