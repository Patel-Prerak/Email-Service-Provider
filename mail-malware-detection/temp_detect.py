
import sys
import json
sys.path.insert(0, r'C:\Users\patel\Desktop\old\email-analyzer\mail-malware-detection\src')

try:
    from predict_with_headers import predict_phishing
    
    result = predict_phishing(
        model_path=r'C:\Users\patel\Desktop\old\email-analyzer\mail-malware-detection\models\phishing_pipeline.joblib',
        subject="Jr. Technical Consultant (NAV/Business Central) @ Shreeji Softinfo Consultancy",
        body="Jr. Technical Consultant (NAV/Business Central) @ Shreeji Softinfo Consultancy",
        receiving_chain="",
        esp="unknown",
        spf_pass=False,
        dkim_pass=False,
        dmarc_pass=False,
    )
    print(json.dumps(result))
except Exception as e:
    import traceback
    error_result = {
        'is_phishing': False,
        'confidence': 0,
        'risk_level': 'error',
        'message': f'Error: {str(e)}'
    }
    traceback.print_exc()
    print(json.dumps(error_result))
